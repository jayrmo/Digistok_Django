        
        
        /* Estilo personalizado para o modal de categorias */
        .category-modal {
            max-width: 500px;
        }
        
        /* Estilo para a lista de unidades de medida */
        .unit-dropdown {
            position: relative;
            display: inline-block;
        }
        
        /* Estilo para a lista de unidades de medida e fornecedores */
        .dropdown {
            position: relative;
            display: inline-block;
            width: 100%;
        }
        
        .unit-dropdown-content {
            display: none;
            position: absolute;
            background-color: #f9f9f9;
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .unit-dropdown-content a {
            color: black;
            padding: 8px 12px;
            text-decoration: none;
            display: block;
            cursor: pointer;
        }
        
        .unit-dropdown-content a:hover {
            background-color: #0d6efd;
        }
        
        .show {
            display: block;
        }
        
        /* Estilo para o campo de categoria */
        .category-input-group {
            position: relative;
        }
        
        .category-list {
            position: absolute;
            top: 100%;
            left: 0;
            z-index: 1000;
            display: none;
            float: left;
            min-width: 10rem;
            padding: 0.5rem 0;
            margin: 0.125rem 0 0;
            font-size: 1rem;
            color: #212529;
            text-align: left;
            list-style: none;
            background-color: #fff;
            background-clip: padding-box;
            border: 1px solid rgba(0, 0, 0, 0.15);
            border-radius: 0.25rem;
            max-height: 200px;
            overflow-y: auto;
            width: 100%;
        }
        
        .category-list.show {
            display: block;
        }
        
        .category-item {
            display: block;
            width: 100%;
            padding: 0.25rem 1.5rem;
            clear: both;
            font-weight: 400;
            color: #212529;
            text-align: inherit;
            white-space: nowrap;
            background-color: transparent;
            border: 0;
            cursor: pointer;
        }
        
        .category-item:hover {
            background-color: #f8f9fa;
        }
 












        
// Simulação de banco de dados para categorias
let categories = ['Eletrônicos', 'Alimentos', 'Bebidas', 'Limpeza', 'Escritório'];

// Carrega as categorias quando a página é carregada
document.addEventListener('DOMContentLoaded', function () {
    loadCategories();
    loadExistingCategories();

    // Configura o dropdown de unidades de medida
    document.getElementById('unit').addEventListener('click', function () {
        document.getElementById('unitDropdown').classList.toggle('show');
    });
    
    // Configura o dropdown de unidades de medida
    document.getElementById('fornecedor').addEventListener('click', function () {
        document.getElementById('fornecedorDropdown').classList.toggle('show');
        
    });

    // Fecha o dropdown se clicar fora
    window.onclick = function (event) {
        if (!event.target.matches('#unit')) {
            var dropdowns = document.getElementsByClassName("unit-dropdown-content");
            for (var i = 0; i < dropdowns.length; i++) {
                var openDropdown = dropdowns[i];
                if (openDropdown.classList.contains('show')) {
                    openDropdown.classList.remove('show');
                }
            }

            if (!event.target.matches('#category') && !event.target.matches('#categoryDropdownButton')) {
                document.getElementById('categoryList').classList.remove('show');
            }
        }
    }
});

// Função para selecionar uma unidade de medida
function selectUnit(unit) {
    document.getElementById('unit').value = unit;
    document.getElementById('unitDropdown').classList.remove('show');
}

// Função para selecionar um Fornecedor
function selectFornecedor(fornecedor) {
    console.log('fornecedor')
    document.getElementById('fornecedor').value = fornecedor;
    document.getElementById('fornecedorDropdown').classList.remove('show');
}


// Função para alternar a lista de categorias
function toggleCategoryList() {
    document.getElementById('categoryList').classList.toggle('show');
}

// Função para selecionar uma categoria
function selectCategory(category) {
    document.getElementById('category').value = category;
    document.getElementById('categoryList').classList.remove('show');
}

// Função para carregar categorias no dropdown
function loadCategories() {
    const categoryList = document.getElementById('categoryList');
    categoryList.innerHTML = '';

    categories.forEach(category => {
        const item = document.createElement('li');
        item.className = 'category-item';
        item.textContent = category;
        item.onclick = function () { selectCategory(category); };
        categoryList.appendChild(item);
    });
}

// Função para carregar categorias existentes no modal
function loadExistingCategories() {
    const existingCategories = document.getElementById('existingCategories');
    existingCategories.innerHTML = '';

    if (categories.length === 0) {
        existingCategories.innerHTML = '<div class="text-muted">Nenhuma categoria cadastrada</div>';
        return;
    }

    categories.forEach((category, index) => {
        const item = document.createElement('div');
        item.className = 'list-group-item d-flex justify-content-between align-items-center';

        const categoryName = document.createElement('span');
        categoryName.textContent = category;

        const deleteBtn = document.createElement('button');
        deleteBtn.className = 'btn btn-sm btn-danger';
        deleteBtn.innerHTML = '<i class="bi bi-trash"></i>';
        deleteBtn.onclick = function () { deleteCategory(index); };

        item.appendChild(categoryName);
        item.appendChild(deleteBtn);
        existingCategories.appendChild(item);
    });
}

// Função para adicionar uma nova categoria
function addCategory() {
    const newCategoryInput = document.getElementById('newCategory');
    const newCategory = newCategoryInput.value.trim();

    if (newCategory === '') {
        alert('Por favor, digite o nome da categoria');
        return;
    }

    if (categories.includes(newCategory)) {
        alert('Esta categoria já existe');
        return;
    }

    categories.push(newCategory);
    newCategoryInput.value = '';

    loadCategories();
    loadExistingCategories();
}

// Função para deletar uma categoria
function deleteCategory(index) {
    if (confirm('Tem certeza que deseja excluir esta categoria?')) {
        categories.splice(index, 1);
        loadCategories();
        loadExistingCategories();

        // Limpa o campo de categoria se a categoria selecionada foi removida
        const currentCategory = document.getElementById('category').value;
        if (!categories.includes(currentCategory)) {
            document.getElementById('category').value = '';
        }
    }
}

// Função para resetar o formulário
function resetForm() {
    document.getElementById('productForm').reset();
}

// Função para submeter o formulário
document.getElementById('productForm').addEventListener('submit', function (e) {
    e.preventDefault();

    const productName = document.getElementById('productName').value;
    const quantity = document.getElementById('quantity').value;
    const unit = document.getElementById('unit').value;
    const category = document.getElementById('category').value;

    if (!productName || !quantity || !unit || !category) {
        alert('Por favor, preencha todos os campos obrigatórios');
        return;
    }

    // Aqui você faria a submissão para o servidor
    alert(`Produto cadastrado com sucesso!\n\nNome: ${productName}\nQuantidade: ${quantity}\nUnidade: ${unit}\nCategoria: ${category}`);

    // Limpa o formulário após o cadastro
    resetForm();
});
























{% extends "base.html" %}
{% load static %}

{% block body %}

<div class="row justify-content-center">
    <div class="">
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h3 class="mb-0"><i class="bi bi-box-seam"></i> Cadastro de Produto</h3>
            </div>
            <div class="card-body">
                <form id="productForm">
                    <div class="mb-3">
                        <label for="productName" class="form-label">Nome do Produto</label>
                        <input type="text" class="form-control" id="productName" required>
                    </div>

                    <div class="mb-3">
                        <label for="quantity" class="form-label">Quantidade</label>
                        <input type="number" class="form-control" id="quantity" min="0" step="0.01" required>
                    </div>

                    <div class="mb-3">
                        <label for="description" class="form-label">Descrição</label>
                        <textarea class="form-control" id="description" rows="3"></textarea>
                    </div>


                    <div class="mb-3">
                        <label for="supplier" class="form-label">Fornecedor</label>
                        <div class="dropdown">
                            <input type="text" class="form-control" id="supplier" placeholder="Selecione o fornecedor"
                                readonly>
                            <div id="supplierDropdown" class="dropdown-content">
                                <a onclick="selectDropdown('supplier', 'Fornecedor A')">Fornecedor A</a>
                                <a onclick="selectDropdown('supplier', 'Fornecedor B')">Fornecedor B</a>
                                <a onclick="selectDropdown('supplier', 'Fornecedor C')">Fornecedor C</a>
                                <a onclick="selectDropdown('supplier', 'Fornecedor D')">Fornecedor D</a>
                                <a onclick="selectDropdown('supplier', 'Fornecedor E')">Fornecedor E</a>
                                <a onclick="selectDropdown('supplier', 'Fornecedor F')">Fornecedor F</a>
                            </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="unit" class="form-label">Unidade de Medida</label>
                        <div class="unit-dropdown">
                            <input type="text" class="form-control" id="unit" placeholder="Selecione a unidade"
                                readonly>
                            <div id="unitDropdown" class="unit-dropdown-content">
                                <a onclick="selectUnit('Unidade')">Unidade</a>
                                <a onclick="selectUnit('Pacote')">Pacote</a>
                                <a onclick="selectUnit('Caixa')">Caixa</a>
                                <a onclick="selectUnit('Saco')">Saco</a>
                                <a onclick="selectUnit('Par')">Par</a>
                                <a onclick="selectUnit('Dúzia')">Dúzia</a>
                            </div>
                        </div>
                    </div>


                    <div class="mb-3">
                        <label for="category" class="form-label">Categoria</label>
                        <div class="input-group category-input-group">
                            <input type="text" class="form-control" id="category" placeholder="Selecione a categoria"
                                readonly>
                            <button class="btn btn-outline-secondary" type="button" id="categoryDropdownButton"
                                onclick="toggleCategoryList()">
                                <i class="bi bi-chevron-down"></i>
                            </button>
                            <button class="btn btn-primary" type="button" data-bs-toggle="modal"
                                data-bs-target="#categoryModal">
                                <i class="bi bi-gear"></i> Gerenciar
                            </button>
                            <ul id="categoryList" class="category-list">
                                <!-- Categorias serão carregadas aqui -->
                            </ul>
                        </div>
                    </div>

                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <button type="button" class="btn btn-secondary me-md-2" onclick="resetForm()">
                            <i class="bi bi-x-circle"></i> Limpar
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-save"></i> Salvar
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Modal para gerenciamento de categorias -->
<div class="modal fade" id="categoryModal" tabindex="-1" aria-labelledby="categoryModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered category-modal">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="categoryModalLabel"><i class="bi bi-tags"></i> Gerenciar Categorias</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                    aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label for="newCategory" class="form-label">Nova Categoria</label>
                    <div class="input-group">
                        <input type="text" class="form-control" id="newCategory"
                            placeholder="Digite o nome da categoria">
                        <button class="btn btn-success" type="button" onclick="addCategory()">
                            <i class="bi bi-plus-circle"></i> Adicionar
                        </button>
                    </div>
                </div>

                <div class="mb-3">
                    <label class="form-label">Categorias Existentes</label>
                    <div class="list-group" id="existingCategories">
                        <!-- Categorias existentes serão listadas aqui -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    <i class="bi bi-x-lg"></i> Fechar
                </button>
            </div>
        </div>
    </div>
</div>

{% endblock %}